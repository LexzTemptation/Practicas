
use ('spring_test');

/* db.createCollection('persona'); */

/* db.clientes.find(); */

/* db.counters.insert

(

   {

      _id: "id_persona",

      seq: 1009

   }

) */



/*Antes de ingresar un nuevo registro se tiene que convocar esta funciï¿½n*/

/* function getNextSequence(id_persona) 

{

   var ret = db.counters.findAndModify

    (

          {

            query: { _id: id_persona },

            update: { $inc: { seq: 1 } },

            new: true,



            upsert: true



          }

   );



   return ret.seq;

}



function insertDocument(doc, targetCollection) 

{

    while (1)

        {

            var cursor = targetCollection.find( {}, { _id: 1 } ).sort( { _id: -1 } ).limit(1);



            var seq = cursor.hasNext() ? cursor.next()._id + 1 : 1;



            doc._id = seq;



            var results = targetCollection.insert(doc);



            if( results.hasWriteError() ) 

                { */

                    //if( results.writeError.code == 11000 /* dup key */ )

                    /* continue;

                    

                    else

                    print( "unexpected error inserting data: " + tojson( results ) );

                }



        break;

    }

} */



/*datos de las personas*/

/* db.persona.insertOne
(
    {
        _id: getNextSequence("id_persona"),
        nombre : "Juan",
        apellido : "Perez",
        email : ('jpear@gmail.com '),
    	  telefono : "1234567891",
        direccion: 
        {
            "calle": "Reinosa",
            "numero": 1780,
            "codigopostal": 5000
        }
    }
);

db.persona.insertOne
(
    {
        _id: getNextSequence("id_persona"),
        nombre : "Ramiro",
        apellido : "Leata",
        email : ('rleata@gmail.com '),
    	  telefono : "987654321",
        direccion: 
        {
            "calle": "Colon",
            "numero": 1200,
            "codigopostal": 5000
        }
    }
);

db.persona.insertOne
(
  {
    _id: getNextSequence("id_persona"),
    nombre : "Martina",
    apellido : "Lawrence",
    email : ('mlaw@gmail.com '),
	  telefono : "38456583",
    direccion: 
    {
        calle: "Dean Funes",
        numero: 23,
        codigopostal: 5002
    }
  }
);

db.persona.insertOne
(
  {
    _id: getNextSequence("id_persona"),
    nombre : "Paola",
    apellido : "Fran",
    email : ('pfra@gmail.com '),
	  telefono : "56345347",
    "direccion": 
    {
        "calle": "Colon",
        "numero": 150,
        "codigopostal": 5000
    }
  }
); */


/* db.persona.countDocuments( { email: { $exists: true } } ); */

/* 50 y 200 */

/* db.persona.find({telefono:{$eq:"56345347"}}); */

/* db.persona.find({},{_id:0, apellido:0, email:0, telefono:0, direccion:0}) */

/* db.persona.find().limit(2); */

/* db.persona.find().skip(2); */
/* 
db.persona.update
(
  {
    _id: 1010
  },
    {
      $set:
      {
        "nombre": "Carlos"
      }
    }
); */






